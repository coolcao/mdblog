
使用markdown写博客，然后推送到github，github定制钩子到本程序，然后程序拉取博客内容，保存到mongodb，前端获取数据展示博客。

流程示意图：

![示意图](http://7xt3oh.com2.z0.glb.clouddn.com/blog/mdblog.png)


### 流程：

  * github推送更新信息
  * 根据github的推送，分别获取 [新添加，更新，删除]的所有文件列表，然后请求github拿取更新过的文件
    * 如果是新添加的文件，直接插入到数据库
    * 如果是更改过的文件，更新数据库
    * 如果是删除的文件，则删除数据库的相应记录


演示地址：[coolcao.me:8899](coolcao.me:8899)

### 技术细节
* github钩子推送的时候，文件肯定是一个列表{added:[],removed:[],modified:[]},在处理列表的时候，可以使用循环异步的操作，也可以使用队列。
* 获取文件内容时，github返回的是经过base64转码的数据，因此，拿到数据后，先经过base64解码
* 博客内容保存到数据库时，由于github没有给文件做唯一标识，在git中每个文件的提交都会生成不懂的sha值，而且对于修改文件名的操作，git也不会标识为修改，而是标识为[删除一个文件，添加一个文件]，但是文件名在整个git中是唯一的。因此在存储的时候，文件名（其实是git中的文件路径）做唯一索引。文件名姚单独解析一下。
* 关于对博客的排序，如果文件名不发生变化，这时候做更新操作，时间不会变。但是如果文件名也变啦，这个时候就会插入新的文档，这个顺序是不是要考虑？怎么排？
* 怎么做博客推荐？比如博客中哪几篇觉得比较好的推荐到首页
* 目录结构作为博客结构。？
* 要不要做标签？怎么做？
* 要不要做搜索？怎么做？
* 可以参考leanote的实现细节。
* 是不是要做点赞功能？
* 如何做评论？和回复？回复的时候如何再通知他人？我擦，好多内容
* 要不要记录日志

### 技术选型

> 前后端分离，以rest接口交互，前端可随时更换

#### 后台：
* nodejs + mongodb + express
#### 前端：
* angular
* 代码美化

#### markdown博客编写：
由于博客中可能需要图片，因此图片上传到七牛，然后将链接插入到markdown中。具体细节再思考。
